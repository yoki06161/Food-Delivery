<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>OAuth2 Login Success</title>
</head>
<body>
  <h1>OAuth2 Login Success</h1>
  
  <div id="result"></div>
  <a href="/ws-test.html">WebSocket Test Page로 이동</a>

  <script>
    // 1) 현재 URL에서 쿼리 파라미터(token) 추출
    const params = new URLSearchParams(window.location.search);
    const token = params.get('token');

    // 2) 토큰이 있다면 콘솔에 출력하고, Local Storage 등에 저장
    if (token) {
      console.log('Received token:', token);
      // Local Storage에 jwt라는 이름으로 저장
      localStorage.setItem('jwt', token);

      // 화면에 표시 (테스트 용)
      document.getElementById('result').textContent 
        = `JWT 토큰을 성공적으로 받았습니다: ${token}`;
    } else {
      document.getElementById('result').textContent 
        = '토큰이 없습니다. 로그인 절차를 다시 진행하세요.';
    }
  </script>
</body>
</html>
